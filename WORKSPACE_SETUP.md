# ğŸš€ ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹æ§‹æˆã‚¬ã‚¤ãƒ‰

## ğŸ“ ç¾åœ¨ã®ä¸¦åˆ—ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹æ§‹æˆ

ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã¯ **Git Worktree** ã‚’ä½¿ç”¨ã—ãŸä¸¦åˆ—ä½œæ¥­ç’°å¢ƒã¨ã—ã¦æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚

### æ§‹æˆæ¸ˆã¿ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ä¸€è¦§

```
C:\Users\ikeda\Workspace\1github\
â”œâ”€â”€ python-cslrtools2/           # ãƒ¡ã‚¤ãƒ³ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹
â”‚   â”œâ”€â”€ ãƒ–ãƒ©ãƒ³ãƒ: dev-ai/fix-sldataset-logger
â”‚   â”œâ”€â”€ .venv/                   # ç‹¬ç«‹ä»®æƒ³ç’°å¢ƒ
â”‚   â””â”€â”€ å½¹å‰²: loggerä¿®æ­£ãƒ»ãƒ¡ã‚¤ãƒ³é–‹ç™º
â”‚
â”œâ”€â”€ cslrtools2-dependencies/     # ä¾å­˜é–¢ä¿‚ç®¡ç†
â”‚   â”œâ”€â”€ ãƒ–ãƒ©ãƒ³ãƒ: dev-ai/dependencies-update (detached)
â”‚   â”œâ”€â”€ .venv/                   # ç‹¬ç«‹ä»®æƒ³ç’°å¢ƒ
â”‚   â””â”€â”€ å½¹å‰²: ä¾å­˜é–¢ä¿‚ã®æ›´æ–°ãƒ»äº’æ›æ€§ãƒ†ã‚¹ãƒˆ
â”‚
â”œâ”€â”€ cslrtools2-gitignore/        # Gitãƒ»Dockerè¨­å®š
â”‚   â”œâ”€â”€ ãƒ–ãƒ©ãƒ³ãƒ: dev-ai/gitignore-cleanup (detached)
â”‚   â”œâ”€â”€ .venv/                   # ç‹¬ç«‹ä»®æƒ³ç’°å¢ƒ
â”‚   â””â”€â”€ å½¹å‰²: .gitignoreæœ€é©åŒ–ãƒ»Dockerç’°å¢ƒæ§‹ç¯‰
â”‚
â””â”€â”€ cslrtools2-utilities/        # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£æ‹¡å¼µ
    â”œâ”€â”€ ãƒ–ãƒ©ãƒ³ãƒ: dev-ai/utilities-expansion (detached)
    â”œâ”€â”€ .venv/                   # ç‹¬ç«‹ä»®æƒ³ç’°å¢ƒ
    â””â”€â”€ å½¹å‰²: ã‚³ã‚¢ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ»ä¾‹å¤–å‡¦ç†è¿½åŠ 
```

## âœ… ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ¸ˆã¿å†…å®¹

### 1. Git Worktreeæ§‹æˆ
- [x] ãƒ¡ã‚¤ãƒ³ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹: `python-cslrtools2`
- [x] ä¾å­˜é–¢ä¿‚ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹: `cslrtools2-dependencies`
- [x] Gitè¨­å®šãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹: `cslrtools2-gitignore`
- [x] ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹: `cslrtools2-utilities`

### 2. å„ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ä»®æƒ³ç’°å¢ƒ
- [x] å…¨ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã§ `.venv` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆæ¸ˆã¿
- [x] Python 3.12.11 ã‚’ä½¿ç”¨
- [x] ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ï¼ˆ`--index-strategy unsafe-best-match`ï¼‰

### 3. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
- PyTorch 2.9.0+cu128 (utilities, gitignore) / 2.9.1 (dependencies)
- NumPy 2.3.4
- Zarr 3.1.3
- safetensors 0.6.2
- ãã®ä»–40+ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

## ğŸ”„ ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹åˆ‡ã‚Šæ›¿ãˆæ–¹æ³•

### PowerShellã§ã®åˆ‡ã‚Šæ›¿ãˆ

```powershell
# ãƒ¡ã‚¤ãƒ³ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«ç§»å‹•
cd C:\Users\ikeda\Workspace\1github\python-cslrtools2

# ä¾å­˜é–¢ä¿‚ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«ç§»å‹•
cd ..\cslrtools2-dependencies

# Gitè¨­å®šãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«ç§»å‹•
cd ..\cslrtools2-gitignore

# ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«ç§»å‹•
cd ..\cslrtools2-utilities
```

### ä¸€æ™‚çš„ãªç§»å‹•ï¼ˆPush/Pop-Locationï¼‰

```powershell
# ä¸€æ™‚çš„ã«åˆ¥ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã§ä½œæ¥­
Push-Location ..\cslrtools2-utilities
uv run python script.py
Pop-Location  # å…ƒã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«æˆ»ã‚‹
```

## ğŸ› ï¸ é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### å„ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã§ã®åŸºæœ¬æ“ä½œ

```powershell
# ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«ç§»å‹•
cd ..\cslrtools2-<name>

# å¿…ãšuv run pythonã‚’ä½¿ç”¨
uv run python -c "import cslrtools2; print('OK')"

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
uv run pytest

# ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ
uv run lmpipe --help
```

### ã‚³ãƒŸãƒƒãƒˆãƒ»ãƒ—ãƒƒã‚·ãƒ¥

```powershell
# å¤‰æ›´ã‚’ç¢ºèª
git status
git diff

# ã‚³ãƒŸãƒƒãƒˆ
git add .
git commit -m "feat: Description"

# ãƒ—ãƒƒã‚·ãƒ¥ï¼ˆdetached HEADã®å ´åˆã¯ãƒ–ãƒ©ãƒ³ãƒä½œæˆãŒå¿…è¦ï¼‰
git checkout -b dev-ai/my-changes
git push origin dev-ai/my-changes
```

## ğŸ” ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ç®¡ç†ã‚³ãƒãƒ³ãƒ‰

### ç¾åœ¨ã®æ§‹æˆã‚’ç¢ºèª

```powershell
# worktreeä¸€è¦§è¡¨ç¤º
git worktree list

# å‡ºåŠ›ä¾‹:
# C:/Users/ikeda/Workspace/1github/python-cslrtools2        e3cbc45 [dev-ai/fix-sldataset-logger]
# C:/Users/ikeda/Workspace/1github/cslrtools2-dependencies  47cf266 (detached HEAD)
# ...
```

### æ–°ã—ã„worktreeã‚’è¿½åŠ 

```powershell
# ãƒ¡ã‚¤ãƒ³ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã§å®Ÿè¡Œ
cd C:\Users\ikeda\Workspace\1github\python-cslrtools2

# æ–°è¦ãƒ–ãƒ©ãƒ³ãƒã§worktreeä½œæˆ
git worktree add ..\cslrtools2-<name> -b dev-ai/<task-name>

# æ—¢å­˜ãƒ–ãƒ©ãƒ³ãƒã§worktreeä½œæˆ
git worktree add ..\cslrtools2-<name> origin/dev-ai/<branch-name>

# ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
cd ..\cslrtools2-<name>
uv venv
uv pip install -e . --index-strategy unsafe-best-match
```

### worktreeã®å‰Šé™¤

```powershell
# ä½œæ¥­å®Œäº†å¾Œã€worktreeã‚’å‰Šé™¤
git worktree remove ..\cslrtools2-<name>

# å¼·åˆ¶å‰Šé™¤ï¼ˆå¤‰æ›´ãŒã‚ã‚‹å ´åˆï¼‰
git worktree remove ..\cslrtools2-<name> --force
```

## âš ï¸ é‡è¦ãªæ³¨æ„äº‹é …

### DOï¼ˆæ¨å¥¨ï¼‰

âœ… **å¿…ãš`uv run python`ã‚’ä½¿ç”¨**
```powershell
uv run python script.py  # âœ“ æ­£ã—ã„
python script.py         # âœ— é–“é•ã„
```

âœ… **å„ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã§ç‹¬ç«‹ã—ãŸç’°å¢ƒã‚’ç¶­æŒ**
- `.venv`ã¯å…±æœ‰ã—ãªã„
- ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯å„ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã§å€‹åˆ¥ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

âœ… **é »ç¹ã«ã‚³ãƒŸãƒƒãƒˆï¼†ãƒ—ãƒƒã‚·ãƒ¥**
- AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã®å”èª¿ã®ãŸã‚å°ã•ãé »ç¹ã«

âœ… **Conventional Commitså½¢å¼ã‚’ä½¿ç”¨**
```
feat: æ–°æ©Ÿèƒ½
fix: ãƒã‚°ä¿®æ­£
docs: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
chore: ãƒ“ãƒ«ãƒ‰ãƒ»è¨­å®šå¤‰æ›´
```

### DON'Tï¼ˆé¿ã‘ã‚‹ã¹ãï¼‰

âŒ **è¤‡æ•°ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã§åŒã˜ãƒ–ãƒ©ãƒ³ãƒã‚’ç·¨é›†ã—ãªã„**
- Worktreeã¯åŒã˜ãƒ–ãƒ©ãƒ³ãƒã‚’è¤‡æ•°ç®‡æ‰€ã§ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã§ãã¾ã›ã‚“

âŒ **`.venv`ã‚„`__pycache__`ã‚’å…±æœ‰ã—ãªã„**
- Gitç®¡ç†å¯¾è±¡å¤–ãªã®ã§ã€å„è‡ªã§å†ç”Ÿæˆ

âŒ **bare pythonã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã‚ãªã„**
- å¿…ãš`uv run python`çµŒç”±ã§å®Ÿè¡Œ

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼

```powershell
# ã‚¨ãƒ©ãƒ¼: No solution found when resolving dependencies
# è§£æ±º: --index-strategy unsafe-best-matchã‚’ä½¿ç”¨
uv pip install -e . --index-strategy unsafe-best-match
```

### detached HEADçŠ¶æ…‹ã‹ã‚‰ãƒ–ãƒ©ãƒ³ãƒä½œæˆ

```powershell
# ç¾åœ¨ã®çŠ¶æ…‹ã‚’ç¢ºèª
git log --oneline -1

# æ–°ã—ã„ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ
git checkout -b dev-ai/my-branch-name

# ãƒ—ãƒƒã‚·ãƒ¥
git push origin dev-ai/my-branch-name
```

### worktreeå‰Šé™¤æ™‚ã®ã‚¨ãƒ©ãƒ¼

```powershell
# ã‚¨ãƒ©ãƒ¼: worktree has modifications
# è§£æ±º1: å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ
git add .
git commit -m "chore: Save changes"

# è§£æ±º2: å¼·åˆ¶å‰Šé™¤ï¼ˆæ³¨æ„: å¤‰æ›´ãŒå¤±ã‚ã‚Œã¾ã™ï¼‰
git worktree remove ..\cslrtools2-<name> --force
```

## ğŸ“Š ç¾åœ¨ã®ãƒ–ãƒ©ãƒ³ãƒçŠ¶æ³

### ãƒªãƒ¢ãƒ¼ãƒˆdev-aiãƒ–ãƒ©ãƒ³ãƒ
- `origin/dev-ai/dependencies-update` â†’ `cslrtools2-dependencies`
- `origin/dev-ai/gitignore-cleanup` â†’ `cslrtools2-gitignore`
- `origin/dev-ai/utilities-expansion` â†’ `cslrtools2-utilities`
- `origin/dev-ai/integrate-gitignore-and-docker`
- `origin/dev-ai/mp-constants-refactor`
- `origin/dev-ai/torch-2.3-compatibility-test`

### ãƒ­ãƒ¼ã‚«ãƒ«ä½œæ¥­ãƒ–ãƒ©ãƒ³ãƒ
- `dev-ai/fix-sldataset-logger` â†’ `python-cslrtools2`ï¼ˆãƒ¡ã‚¤ãƒ³ï¼‰

## ğŸ¯ ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

```powershell
# æ§‹æˆç¢ºèª
git worktree list

# åˆ¥ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã§ä¸€æ™‚ä½œæ¥­
Push-Location ..\cslrtools2-utilities
uv run python script.py
Pop-Location

# æ–°worktreeä½œæˆ
git worktree add ..\cslrtools2-newfeature -b dev-ai/new-feature
cd ..\cslrtools2-newfeature
uv venv
uv pip install -e . --index-strategy unsafe-best-match

# çŠ¶æ…‹ç¢ºèª
git status
git log --oneline -5

# ã‚³ãƒŸãƒƒãƒˆï¼†ãƒ—ãƒƒã‚·ãƒ¥
git add .
git commit -m "feat: New feature"
git push origin dev-ai/new-feature
```

---

**æœ€çµ‚æ›´æ–°**: 2025å¹´11æœˆ14æ—¥  
**æ§‹æˆå®Œäº†æ—¥**: 2025å¹´11æœˆ14æ—¥

ã“ã®æ§‹æˆã«ã‚ˆã‚Šã€è¤‡æ•°ã®ã‚¿ã‚¹ã‚¯ã‚’åŠ¹ç‡çš„ã«ä¸¦åˆ—å®Ÿè¡Œã§ãã¾ã™ã€‚å„ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã¯ç‹¬ç«‹ã—ã¦ã„ã‚‹ãŸã‚ã€ãƒ–ãƒ©ãƒ³ãƒåˆ‡ã‚Šæ›¿ãˆãªã—ã§è¤‡æ•°ã®æ©Ÿèƒ½é–‹ç™ºã‚’åŒæ™‚é€²è¡Œã§ãã¾ã™ã€‚
